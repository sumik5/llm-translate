# LLM翻訳ツール

高精度な日英翻訳を実現するローカルLLM翻訳ツールです。Markdownフォーマットやコードブロックを保持したまま、自然な翻訳を提供します。

## 必要な環境

### 1. LM Studioのインストール

1. [LM Studio公式サイト](https://lmstudio.ai/)から、お使いのOSに対応したインストーラーをダウンロード
2. インストーラーを実行してLM Studioをインストール

### 2. 推奨モデルのダウンロード

LM Studioで以下のモデルをダウンロードすることを推奨します：

#### plamo-2-translate（推奨）
- 日英翻訳に特化した高精度モデル
- ダウンロード方法：
  1. LM Studioを起動
  2. 左側メニューの「🔍 Discover」をクリック
  3. 検索バーに「plamo-2-translate」と入力
  4. モデルを選択して「Download」をクリック

#### その他の推奨モデル
- **Gemma 2**: 汎用的な多言語対応モデル
- **Llama 3**: 高速で軽量な翻訳対応モデル

### 3. LM StudioでAPIサーバーを起動

1. **モデルをロード**
   - LM Studioの「Local Server」タブを開く
   - 「Select a model to load」でダウンロード済みのモデルを選択
   - 「Load model」をクリック

2. **CORS設定を有効化**（重要）
   - 「Server Options」セクションを開く
   - 「Cross-Origin-Resource-Sharing (CORS)」にチェックを入れる
   - これにより、ブラウザからのアクセスが可能になります

3. **サーバーを起動**
   - 「Start Server」ボタンをクリック
   - デフォルトでは `http://127.0.0.1:1234` で起動します
   - 「Server is running」と表示されれば成功

## 使い方

### 基本的な使用方法

1. **翻訳ツールを開く**
   - `translator.html` をブラウザで直接開く
   - ファイルをダブルクリック、またはブラウザにドラッグ＆ドロップ

2. **テキストを入力**
   - 左側のテキストエリアに翻訳したいテキストを入力
   - Markdownフォーマットも自動認識

3. **翻訳実行**
   - 「翻訳」ボタンをクリック
   - 翻訳結果が右側に表示されます

### ファイルのインポート

以下の形式のファイルをドラッグ＆ドロップまたは「ファイルを選択」でインポート可能：

- **EPUB**: 電子書籍（コードブロックも保持）
- **PDF**: PDF文書
- **TXT**: プレーンテキスト
- **MD**: Markdownファイル

### コードブロックの扱い

- **Markdownのコードブロック**（\`\`\`で囲まれた部分）は自動的に保持されます
- コードブロック内のコメントのみが翻訳されます
- プログラムコード自体は変更されません

例：
````markdown
```python
# This is a comment
def hello_world():
    print("Hello, World!")
```
````

### 高度な設定

#### APIエンドポイントの変更
- 設定アイコン（⚙️）をクリック
- 「APIエンドポイント」にカスタムURLを入力
- デフォルト: `http://127.0.0.1:1234`

#### モデル名の指定
- 設定でモデル名を変更可能
- LM Studioで複数のモデルを切り替える場合に使用

#### その他のLLMサーバー対応
- Ollama: `http://localhost:11434`
- OpenAI互換API: 該当するエンドポイントを設定

## トラブルシューティング

### 「APIに接続できません」エラー

1. LM Studioが起動しているか確認
2. サーバーが「Start Server」で起動しているか確認
3. CORSが有効になっているか確認
4. APIエンドポイントが正しいか確認（デフォルト: `http://127.0.0.1:1234`）

### 翻訳が遅い

- より軽量なモデルを使用する
- GPUアクセラレーションを有効化（LM Studio設定）
- テキストを小さく分割して翻訳

### コードブロックが正しく処理されない

- Markdownモードが有効になっているか確認
- コードブロックが正しく\`\`\`で囲まれているか確認
- EPUBの場合、元のファイルのフォーマットを確認

## 機能一覧

- ✅ 日本語→英語、英語→日本語の双方向翻訳
- ✅ Markdown形式の保持
- ✅ コードブロックの自動検出と保持
- ✅ EPUB/PDF/TXT/MDファイルのインポート
- ✅ リアルタイムプレビュー
- ✅ HTML形式でのエクスポート
- ✅ ダークモード対応
- ✅ 完全オフライン動作（ローカルLLM使用）
- ✅ CORSサポート

## ライセンス

このツールはオープンソースソフトウェアです。自由に使用・改変・配布できます。

## サポート

問題が発生した場合や機能要望がある場合は、GitHubのIssueでお知らせください。